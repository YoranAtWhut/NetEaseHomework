<!DOCTYPE html>
<html>
<head>
<title>1、Hadoop的安装和使用 - 幕布</title>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="renderer" content="webkit"/>
<meta name="author" content="mubu.com"/>
</head>
<body style="margin: 50px 20px;color: #333;font-family: 'Helvetica Neue','Hiragino Sans GB','WenQuanYi Micro Hei','Microsoft Yahei',sans-serif;">
<div class="export-wrapper"><div style="font-size: 24px; padding: 20px 15px 0;"><div style="padding-bottom: 10px">1、Hadoop的安装和使用</div><div style="background: #e5e6e8; height: 1px; margin-bottom: 20px;"></div></div><ul style="list-style: disc outside;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">Hadoop简介</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">基于Java语言开发，跨平台性好</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">核心</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">分布式文件系统HDFS</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">MapReduce</span></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">版本</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">Hadoop 1.0</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">0.20.x</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">最后演化成1.0.x，变成了稳定版</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">0.21.x</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">0.22.x</span></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">第二代Hadoop</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">不同于Hadoop1.0，是一套全新的架构，均包含HDFS Federation和YARN​</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">0.23.x</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">2.x</span></li></ul></li></ul></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">安装Hadoop前的准备工作</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">创建hadoop用户</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">使用hadoop用户登陆Linux系统，并为hadoop用户增加了管理员权限​</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">更新apt</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">安装ssh</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">ssh</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">是secure shell的缩写，是建立在应用层和传输层基础上的安全协议</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">ssh组成</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">客户端</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">包含ssh程序以及像scp，slogin以及sftp等其他的应用程序</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">服务端</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">是一个守护进程，在后台运行并响应来自客户端的连接请求</span></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">安装ssh的原因</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">Hadoop名称节点需要启动集群中所有机器的Hadoop守护进程，这个过程就需要通过ssh登陆来实现。Hadoop并没有提供ssh输入密码登陆的形式，因此所有机器都需要配置为无密码登陆</span></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">安装Java环境</span></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">安装Hadoop</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">下载安装文件</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">下载hadoop-2.7.1.tar.gz</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">执行 sudo tar -zxf hadoop-2.7.1.tar.gz -C /usr/local</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">cd /usr/local</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">sudo mv ./hadoop-2.7.1/ ./hadoop</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">sudo chown -R hadoop ./hadoop</span></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">检查安装是否成果</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">cd /usr/local/hadoop</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">./bin/hadoop version</span></li></ul></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">单机模式配置</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">Hadoop默认模式为非分布式（本地模式），无需进行其他配置即可运行。</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">伪分布式模式配置</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">Hadoop可以在单个节点上以伪分布式的方式运行，同一个节点既作为名称节点又作为数据节点，读取的是分布式文件系统HDFS中的文件。需要指出的是，Hadoop的运行方式是由配置文件决定的，启动Hadoop时会读取配置文件，然后根据配置文件决定运行在什么模式下。</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">修改配置文件</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">配置文件位于/usr/local/hadoop/etc/hadoop/中</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">core-site.xml</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">指定hadoop.tmp.dir</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">用于保存临时文件</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">指定fs.defaultFS</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">指定HDFS的访问地址</span></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">hdfs-site.xml</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">dfs.replication</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">指定副本的数量</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">dfs.namenode.name.dir</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">用于设定名称节点的元数据保存目录</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">dfs.datanode.data.dir</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">用于设定数据节点的数据保存目录</span></li></ul></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">执行名称节点格式化</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">cd /usr/local/hadoop<br>./bin/hdfs namenode -format​</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">启动Hadoop</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">cd /usr/local/hadoop<br>./sbin/<a class="content-link" target="_blank" rel="noreferrer" href="http://start-dfs.sh" style="text-decoration: underline; opacity: 0.6; color: inherit;">start-dfs.sh</a>​</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">使用web界面查看HDFS信息</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">在地址栏输入<a class="content-link" target="_blank" rel="noreferrer" href="http://localhost:50070就可以查看名称节点和数据节点信息" style="text-decoration: underline; opacity: 0.6; color: inherit;">http://localhost:50070就可以查看名称节点和数据节点信息</a></span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">运行Hadoop伪分布式实例</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">关闭Hadoop</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">/usr/local/hadoop/sbin/<a class="content-link" target="_blank" rel="noreferrer" href="http://stop-dfs.sh" style="text-decoration: underline; opacity: 0.6; color: inherit;">stop-dfs.sh</a></span></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">分布式模式配置</span><br><span class="note" style="display: inline-block; color: rgb(136, 136, 136); line-height: 18px; min-height: 18px; font-size: 13px; padding-bottom: 2px;">HDFS的名称节点和数据节点位于不同机器上</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">缺少设备，暂不安装</span></li></ul></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">使用docker搭建Hadoop分布式集群</span><ul class="children" style="list-style: disc outside; padding-bottom: 4px;"><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">docker简介</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">安装docker</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">在docker上安装ubuntu系统</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">Ubuntu系统初始化（安装各种Hadoop需要的组建）</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">安装Hadoop</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">配置Hadoop集群</span></li><li style="line-height: 22px;"><span class="content mubu-node" style="line-height: 22px; min-height: 22px; font-size: 14px; display: inline-block; vertical-align: top;">运行Hadoop实例</span></li></ul></li></ul></div>
<div style="text-align: center; font-size: 13px"><span style="color: #666"><br/><br/><br/><br/>以上内容整理于 </span><a target="_blank" style="color: #4694FF" href="https://mubu.com?s=export-html">幕布</a></div>
</body>
</html>